# 1 å‰è¨€
## 1.1 ä¸šåŠ¡åœºæ™¯
å›¾ç‰‡å‚¨å­˜åœ¨åå°ä¸­ï¼Œæ ¹æ®å›¾ç‰‡çš„åœ°å€ï¼Œåœ¨vueé¡µé¢ä¸­ï¼ŒæŸ¥çœ‹å›¾ç‰‡ï¼Œå¹¶æ ¹æ®åæ ‡æ ‡æ³¨æŒ‡å®šåŒºåŸŸã€‚

ç”±äºæµè§ˆå™¨çš„æœºåˆ¶ï¼Œä½¿ç”¨`window.location.href`ä¸‹è½½å›¾ç‰‡æ—¶ï¼Œå¹¶ä¸ä¼šä¿å­˜åˆ°æœ¬åœ°ï¼Œä¼šåœ¨æµè§ˆå™¨æ‰“å¼€ã€‚

# 2 å®ç°åŸç†
## 2.1 ç»˜åˆ¶ç”»å¸ƒ
```
<el-dialog
    title="æŸ¥çœ‹å›¾ç‰‡"
    :visible.sync="dialogJPG"
    append-to-body>
    <canvas id="mycanvas" width="940" height="570"></canvas>
</el-dialog>
```
è¿™é‡Œä¸ºäº†äº¤äº’ä½“éªŒï¼Œä½¿ç”¨äº†`element-ui`çš„å¼¹çª—æ–¹å¼ã€‚å°†canvasç”»å¸ƒæ”¾åˆ°äº†å¼¹çª—ä¸­ã€‚

ä¸ºäº†çªå‡ºç”»å¸ƒæ•ˆæœå¯ä»¥åœ¨cssä¸­è®¾ç½®ä¸€ä¸ªè¾¹æ¡†ã€‚
```
#mycanvas {
    border: 1px solid rgb(199, 198, 198);
}
```
## 2.2 ç»˜åˆ¶å›¾ç‰‡
```
//  imageUrlä¸ºåå°æä¾›å›¾ç‰‡åœ°å€
doDraw(imageUrl){
    //  è·å–canvas
    var canvas = document.getElementById("mycanvas")
    //  ç”±äºå¼¹çª—ï¼Œç¡®ä¿å·²è·å–åˆ°
    var a = setInterval(() =>{
        //  é‡å¤è·å–
        canvas = document.getElementById("mycanvas")
        if(!canvas){
          return false
        } else {
            clearInterval(a)
            //  å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç”»ç¬”ï¼Œå¯ç”»è·¯å¾„ã€çŸ©å½¢ã€æ–‡å­—ã€å›¾åƒ
            var context = canvas.getContext('2d')
            var img = new Image()
            img.src = imageUrl
            //  åŠ è½½å›¾ç‰‡
            img.onload = function(){
                if(img.complete){
                    //  æ ¹æ®å›¾åƒé‡æ–°è®¾å®šäº†canvasçš„é•¿å®½
                    canvas.setAttribute("width",img.width)
                    canvas.setAttribute("height",img.height)
                    //  ç»˜åˆ¶å›¾ç‰‡
                    context.drawImage(img,0,0,img.width,img.height)
                }
            }
        }
    },1)
},
```
`context.drawImage()`æ–¹æ³•çš„å‚æ•°ä»‹ç»ï¼Œå¯å‚ç…§ [**W3school**](http://www.w3school.com.cn/html5/canvas_drawimage.asp)

## 2.3 ç»˜åˆ¶çŸ©å½¢
```
context.strokeStyle = "red"
context.lineWidth = 3;
context.strokeRect(x, y, width, height)
```
`context` åŒä¸Šé¢çš„å®šä¹‰

`strokeStyle` çŸ©å½¢é¢œè‰²

`lineWidth` çŸ©å½¢è¾¹æ¡†å®½åº¦

`x,y,width,height` çŸ©å½¢ä½ç½®åŠ é•¿å®½

## 2.4 ç»˜åˆ¶çº¿æ¡
```
context.moveTo(x1,y1) 
context.lineTo(x2,y2)
context.strokeStyle = "red"
context.lineWidth = 3;
context.stroke()
```
`(x1,y1) ` `(x2,y2)` çº¿æ¡çš„èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡

`strokeStyle` `lineWidth` çº¿æ¡çš„æ ·å¼

## 2.5 ç»˜åˆ¶æ–‡å­—
```
context.font = "26px Arial bolder"
context.fillStyle = 'red'
context.fillText(text,x,y)
```
`font` `fillStyle` æ–‡å­—æ ·å¼

`text` æ–‡å­—å†…å®¹

`x,y` æ–‡å­—æ˜¾ç¤ºåæ ‡

## 2.6 ä¸‹è½½å›¾ç‰‡

```
// å›¾ç‰‡åœ°å€å’Œå›¾ç‰‡åç§°
downIamge (imgsrc, name) { 
    let image = new Image()
    image.setAttribute('crossOrigin', 'anonymous')
    image.onload = function () {
        let canvas = document.createElement('canvas')
        canvas.width = image.width
        canvas.height = image.height
        let context = canvas.getContext('2d')
        context.drawImage(image, 0, 0, image.width, image.height)
        let url = canvas.toDataURL('image/jpg') 
        let a = document.createElement('a')
        let event = new MouseEvent('click')
        a.download = name
        a.href = url
        a.dispatchEvent(event)
    }
    image.src = imgsrc
},
```
# 3 åè®°
è¿™é‡Œåªæ˜¯åˆ—å‡ºcanvasçš„åŸºç¡€ä½¿ç”¨ï¼Œå…·ä½“çš„äº¤äº’å’Œå±•ç¤ºè¿˜éœ€è¦æ›´å¤šçš„è®¾è®¡ã€‚

**æ„Ÿè°¢æ”¯æŒã€‚è‹¥ä¸è¶³ä¹‹å¤„ï¼Œæ¬¢è¿å¤§å®¶æŒ‡å‡ºï¼Œå…±å‹‰ã€‚**

**å¦‚æœè§‰å¾—ä¸é”™ï¼Œè®°å¾— ç‚¹èµï¼Œè°¢è°¢å¤§å®¶** ğŸ˜‚ 

> **æ¬¢è¿å…³æ³¨ æˆ‘çš„ï¼š** [ã€Githubã€‘](https://github.com/xrkffgg/Tools)[ã€æ˜é‡‘ã€‘](https://juejin.im/user/59c369496fb9a00a4843a3e2/posts)[ã€ç®€ä¹¦ã€‘](https://www.jianshu.com/u/4ca4daac5890)[ã€CSDNã€‘](https://blog.csdn.net/xrk_ffgg)[ã€OSCHINAã€‘](https://my.oschina.net/xrkffgg)[ã€SFã€‘](https://segmentfault.com/u/xrkffgg/articles)
## 3.1 å‚è€ƒèµ„æ–™
- [W3school](http://www.w3school.com.cn/tags/tag_canvas.asp)

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://user-gold-cdn.xitu.io/2019/4/23/16a4837df5394a7c?w=88&h=31&f=png&s=1888" /></a><br />æœ¬æ–‡ç« é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯ã€‚

**å‡ºå¤„ä¸ºï¼š**[https://github.com/xrkffgg/Tools](https://github.com/xrkffgg/Tools)